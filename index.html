<!DOCTYPE html>
<html>
  <head>
    <title>Waste Classifier</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image"></script>
  </head>
  <body>
    <h1>Waste Classifier</h1>
    <input type="file" id="upload" accept="image/*" />
    <p id="label">Prediction will appear here</p>

    <script>
      const URL = "https://teachablemachine.withgoogle.com/models/-JanviuHH/";

      let model, labelContainer;

      async function init() {
        model = await tmImage.load(URL + "model.json", URL + "metadata.json");
        labelContainer = document.getElementById("label");
      }

      document.getElementById("upload").addEventListener("change", async (e) => {
        const file = e.target.files[0];
        const img = document.createElement("img");
        img.src = URL.createObjectURL(file);
        await img.decode();
        const prediction = await model.predict(img);
        prediction.sort((a, b) => b.probability - a.probability);
        labelContainer.innerText = `Prediction: ${prediction[0].className} (${(prediction[0].probability * 100).toFixed(2)}%)`;
      });

      init();
    </script>
  </body>
</html>
